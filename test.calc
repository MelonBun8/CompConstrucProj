// Comprehensive Test Script for Compiler Project (Charts 1-15)

// Global Variables (Chart 10: Global Scope)
int global_x = 10;
float global_pi = 3.14159;

// Function Definition (Chart 10: Function Scope, Chart 4: Grammar)
func add_numbers(a: int, b: int): int {
    // Local Variable (Chart 10: Block/Function Scope)
    int sum = a + b;
    return sum;
}

func check_parity(n: int): void {
    // Control Flow (Chart 4: IfStmt)
    if (n > 0) {
        print(1); // Positive
    } else {
        print(0); // Non-positive
    }
}

// Main execution block (Chart 9: Parse Tree)
{
    // Constant Folding (Chart 14: Machine Independent Optimization)
    int const_fold_demo = 5 * 2 + 10 - 20; // Should fold to 0

    // Peephole Optimization: Algebraic Identity (Chart 15)
    int identity_check = global_x + 0; // Should optimize to 'global_x'
    int self_assign = global_x;
    self_assign = self_assign; // Should be removed (x = x)

    // Function Call (Chart 13: TAC generation for CALL)
    int result = add_numbers(global_x, 5);
    
    check_parity(result);

    // Dead Code Elimination (Chart 14)
    if (0) {
        // This block is unreachable and should be removed by optimization
        int dead_var = 999;
        print(dead_var);
    }

    // While Loop with Scope (Chart 10: Block Scope)
    int i = 0;
    while (i < 3) {
        i = i + 1;
        print(i);
    }
}
